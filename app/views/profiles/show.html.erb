<%= javascript_pack_tag 'profiles' %>

<p id="notice"><%= notice %></p>

<div class="row">
  <div class="col">
    <div>
      <h1> <%= @profile.name %> </h1>
    </div>

    <div>
      <div>
        <%= image_tag @profile.github_account.avatar_url %>
      </div>
      <div id="profile-details">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">  <b> Github Account: </b> <%= link_to @profile.github_account.login, @profile.github_account.html_url %> </li>
          <li class="list-group-item"> <b> Location: </b> <%= @profile.github_account.location %>
          <li class="list-group-item"> <b> Company: </b> <%= @profile.github_account.company %>
          <li class="list-group-item"> <b> Bio: </b> <%= @profile.github_account.bio %>
          <li class="list-group-item"> <%= link_to 'Edit Profile', edit_profile_path(@profile) %> </li>
          <li class="list-group-item"> <%= link_to 'Log Out', logout_path, method: :delete %> </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="col-4">
    <div>
      <h1> Github Events </h1>
    </div>
    <div>
      <% if @profile.github_account.events.any?  %>
        <% @profile.github_account.events.order(created_at: :desc).limit(10).each do |event| %>
          <ul>
            <li> Event Type: <%= event.type %> </li>
            <li> Action: <%= event.action %> </li>
          </ul>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="col-4">
    <div>
      <h1>Github Repositories</h1>
    </div>
    <div>
      <ul>
        <% @profile.github_repositories.each do |repo| %>
          <li> <%= link_to repo.name, repo.html_url %> </li>
          <ul>
            <li> <%= repo.monitoring_message %> </li>
            <li> <%= link_to 'Edit Monitoring Settings', edit_github_repository_path(repo) %> </li>
          </ul>
        <% end %>
      </ul>
    </div>
  </div>
</div>

